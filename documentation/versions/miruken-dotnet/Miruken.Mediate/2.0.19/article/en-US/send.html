

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Send &mdash; Miruken.Mediate  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/banner.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Miruken.Mediate  documentation" href="../../index.html"/>
        <link rel="next" title="Publish" href="publish.html"/>
        <link rel="prev" title="Handler" href="handler.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Miruken.Mediate
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#source-code">Source Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#mediator-pattern">Mediator Pattern</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="requestAndResponse.html">Request And Response</a></li>
<li class="toctree-l1"><a class="reference internal" href="handler.html">Handler</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Send</a></li>
<li class="toctree-l1"><a class="reference internal" href="publish.html">Publish</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="outline.html">Outline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="outline.html#imiddleware">IMiddleWare</a><ul>
<li class="toctree-l3"><a class="reference internal" href="outline.html#logging">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="outline.html#validation">Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="outline.html#decorators">Decorators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="outline.html#cached">Cached</a></li>
<li class="toctree-l3"><a class="reference internal" href="outline.html#oneway">OneWay</a></li>
<li class="toctree-l3"><a class="reference internal" href="outline.html#route">Route</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuringCastleWindsor.html">Configuring Castle Windsor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuringCastleWindsor.html#installing-mediator">Installing Mediator</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuringCastleWindsor.html#installing-validation-middleware">Installing Validation Middleware</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="inspiration.html">Inspiration</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Miruken.Mediate</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Send</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/article/en-US/send.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="publish.html" class="btn btn-neutral float-right" title="Publish" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="handler.html" class="btn btn-neutral" title="Handler" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="send">
<h1>Send<a class="headerlink" href="#send" title="Permalink to this headline">Â¶</a></h1>
<p><code class="code docutils literal"><span class="pre">Send()</span></code> is an <code class="code docutils literal"><span class="pre">IHandler</span></code> extension method. It will traverse the context and stop after the first handler that successfully handles the message.  If the message is not handled it <em>will throw</em> a &#8220;not handled&#8221; exception.</p>
<p>Here is an example of an Asp.net Web Api Controller. Context implements IHandler.  We call Send on the context passing in the CreateTeam request. Mediator will look through the handlers in the context to find one that can handle the CreateTeam message and return a TeamResult.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">namespace</span> <span class="n">Example</span><span class="o">.</span><span class="n">Team</span>
<span class="p">{</span>
    <span class="n">using</span> <span class="n">System</span><span class="o">.</span><span class="n">Threading</span><span class="o">.</span><span class="n">Tasks</span><span class="p">;</span>
    <span class="n">using</span> <span class="n">System</span><span class="o">.</span><span class="n">Web</span><span class="o">.</span><span class="n">Http</span><span class="p">;</span>
    <span class="n">using</span> <span class="n">League</span><span class="o">.</span><span class="n">Api</span><span class="o">.</span><span class="n">Team</span><span class="p">;</span>
    <span class="n">using</span> <span class="n">Miruken</span><span class="o">.</span><span class="n">Context</span><span class="p">;</span>
    <span class="n">using</span> <span class="n">Miruken</span><span class="o">.</span><span class="n">Mediate</span><span class="p">;</span>

    <span class="n">public</span> <span class="k">class</span> <span class="nc">TeamController</span> <span class="p">:</span> <span class="n">ApiController</span>
    <span class="p">{</span>
        <span class="n">public</span> <span class="n">IContext</span> <span class="n">Context</span> <span class="p">{</span> <span class="n">get</span><span class="p">;</span> <span class="nb">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="n">HttpPost</span><span class="p">]</span>
        <span class="n">public</span> <span class="k">async</span> <span class="n">Task</span><span class="o">&lt;</span><span class="n">Team</span><span class="o">&gt;</span> <span class="n">CreateTeam</span><span class="p">(</span><span class="n">CreateTeam</span> <span class="n">request</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">var</span> <span class="n">result</span>  <span class="o">=</span> <span class="k">await</span> <span class="n">Context</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">Team</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">HttpDelete</span><span class="p">]</span>
        <span class="n">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="n">RemoveTeam</span><span class="p">(</span><span class="n">RemoveTeam</span> <span class="n">request</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">await</span> <span class="n">Context</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">namespace</span> <span class="n">Example</span><span class="o">.</span><span class="n">League</span><span class="o">.</span><span class="n">Api</span><span class="o">.</span><span class="n">Team</span>
<span class="p">{</span>
    <span class="n">using</span> <span class="n">Miruken</span><span class="o">.</span><span class="n">Mediate</span><span class="o">.</span><span class="n">Api</span><span class="p">;</span>

    <span class="n">public</span> <span class="k">class</span> <span class="nc">CreateTeam</span> <span class="p">:</span> <span class="n">IRequest</span><span class="o">&lt;</span><span class="n">TeamResult</span><span class="o">&gt;</span>
    <span class="p">{</span>
        <span class="n">public</span> <span class="n">Team</span> <span class="n">Team</span> <span class="p">{</span> <span class="n">get</span><span class="p">;</span> <span class="nb">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">namespace</span> <span class="n">Example</span><span class="o">.</span><span class="n">League</span><span class="o">.</span><span class="n">Api</span><span class="o">.</span><span class="n">Team</span>
<span class="p">{</span>
    <span class="n">public</span> <span class="k">class</span> <span class="nc">RemoveTeam</span>
    <span class="p">{</span>
        <span class="n">public</span> <span class="n">Team</span> <span class="n">Team</span> <span class="p">{</span> <span class="n">get</span><span class="p">;</span> <span class="nb">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">namespace</span> <span class="n">Example</span><span class="o">.</span><span class="n">League</span><span class="o">.</span><span class="n">Api</span><span class="o">.</span><span class="n">Team</span>
<span class="p">{</span>
    <span class="n">public</span> <span class="k">class</span> <span class="nc">TeamResult</span>
    <span class="p">{</span>
        <span class="n">public</span> <span class="n">Team</span> <span class="n">Team</span> <span class="p">{</span> <span class="n">get</span><span class="p">;</span> <span class="nb">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Send does not require a response.  Notice that the RemoveTeam request does not implement <code class="code docutils literal"><span class="pre">IRequest&lt;TResponse&gt;</span></code> and the handler does not return a response.</p>
<p>If the request does not implement <code class="code docutils literal"><span class="pre">IRequest&lt;TResponse&gt;</span></code> and the handler returns a response, you can pass in the expected return type when you call send as demostrated below.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">namespace</span> <span class="n">Example</span><span class="o">.</span><span class="n">WithPureClasses</span>
<span class="p">{</span>
    <span class="n">using</span> <span class="n">System</span><span class="o">.</span><span class="n">Threading</span><span class="o">.</span><span class="n">Tasks</span><span class="p">;</span>
    <span class="n">using</span> <span class="n">System</span><span class="o">.</span><span class="n">Web</span><span class="o">.</span><span class="n">Http</span><span class="p">;</span>
    <span class="n">using</span> <span class="n">League</span><span class="o">.</span><span class="n">Api</span><span class="o">.</span><span class="n">Team</span><span class="p">;</span>
    <span class="n">using</span> <span class="n">Miruken</span><span class="o">.</span><span class="n">Context</span><span class="p">;</span>
    <span class="n">using</span> <span class="n">Miruken</span><span class="o">.</span><span class="n">Mediate</span><span class="p">;</span>

    <span class="n">public</span> <span class="k">class</span> <span class="nc">TeamController</span> <span class="p">:</span> <span class="n">ApiController</span>
    <span class="p">{</span>
        <span class="n">public</span> <span class="n">Context</span> <span class="n">Context</span> <span class="p">{</span> <span class="n">get</span><span class="p">;</span> <span class="nb">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="n">HttpPost</span><span class="p">]</span>
        <span class="n">public</span> <span class="k">async</span> <span class="n">Task</span><span class="o">&lt;</span><span class="n">Team</span><span class="o">&gt;</span> <span class="n">CreateTeam</span><span class="p">(</span><span class="n">CreateTeam</span> <span class="n">request</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">var</span> <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Context</span><span class="o">.</span><span class="n">Send</span><span class="o">&lt;</span><span class="n">TeamResult</span><span class="o">&gt;</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">Team</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="publish.html" class="btn btn-neutral float-right" title="Publish" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="handler.html" class="btn btn-neutral" title="Handler" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2018, Miruken.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: 2.0.19
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../../../1.6.3/article/en-US/send.html">1.6.3</a></dd>
            <dd><a href="../../../1.6.4/article/en-US/send.html">1.6.4</a></dd>
            <dd><a href="../../../1.6.5/article/en-US/send.html">1.6.5</a></dd>
            <dd><a href="../../../2.0.0/article/en-US/send.html">2.0.0</a></dd>
            <dd><a href="../../../2.0.1/article/en-US/send.html">2.0.1</a></dd>
            <dd><a href="../../../2.0.10/article/en-US/send.html">2.0.10</a></dd>
            <dd><a href="../../../2.0.11/article/en-US/send.html">2.0.11</a></dd>
            <dd><a href="../../../2.0.12/article/en-US/send.html">2.0.12</a></dd>
            <dd><a href="../../../2.0.13/article/en-US/send.html">2.0.13</a></dd>
            <dd><a href="../../../2.0.14/article/en-US/send.html">2.0.14</a></dd>
            <dd><a href="../../../2.0.15/article/en-US/send.html">2.0.15</a></dd>
            <dd><a href="../../../2.0.16/article/en-US/send.html">2.0.16</a></dd>
            <dd><a href="../../../2.0.17/article/en-US/send.html">2.0.17</a></dd>
            <dd><a href="../../../2.0.18/article/en-US/send.html">2.0.18</a></dd>
            <dd><a href="send.html">2.0.19</a></dd>
            <dd><a href="../../../2.0.2/article/en-US/send.html">2.0.2</a></dd>
            <dd><a href="../../../2.0.20/article/en-US/send.html">2.0.20</a></dd>
            <dd><a href="../../../2.0.21/article/en-US/send.html">2.0.21</a></dd>
            <dd><a href="../../../2.0.22/article/en-US/send.html">2.0.22</a></dd>
            <dd><a href="../../../2.0.23/article/en-US/send.html">2.0.23</a></dd>
            <dd><a href="../../../2.0.24/article/en-US/send.html">2.0.24</a></dd>
            <dd><a href="../../../2.0.3/article/en-US/send.html">2.0.3</a></dd>
            <dd><a href="../../../2.0.4/article/en-US/send.html">2.0.4</a></dd>
            <dd><a href="../../../2.0.5/article/en-US/send.html">2.0.5</a></dd>
            <dd><a href="../../../2.0.6/article/en-US/send.html">2.0.6</a></dd>
            <dd><a href="../../../2.0.7/article/en-US/send.html">2.0.7</a></dd>
            <dd><a href="../../../2.0.8/article/en-US/send.html">2.0.8</a></dd>
            <dd><a href="../../../2.0.9/article/en-US/send.html">2.0.9</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../../develop/article/en-US/send.html">develop</a></dd>
            <dd><a href="../../../master/article/en-US/send.html">master</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>